<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Safari Mobile Compatibility Test</title>
    <style>
        body { font-family: monospace; padding: 20px; }
        .test-result { margin: 10px 0; padding: 10px; border-radius: 4px; }
        .pass { background: #d4edda; color: #155724; }
        .fail { background: #f8d7da; color: #721c24; }
        .info { background: #d1ecf1; color: #0c5460; }
    </style>
</head>
<body>
    <h1>Safari Mobile Compatibility Test</h1>
    <div id="results"></div>

    <script>
        const results = document.getElementById('results');

        function addResult(test, status, details) {
            const div = document.createElement('div');
            div.className = `test-result ${status}`;
            div.innerHTML = `<strong>${test}:</strong> ${status.toUpperCase()} - ${details}`;
            results.appendChild(div);
        }

        // Test 1: localStorage support
        try {
            localStorage.setItem('test', '1');
            localStorage.removeItem('test');
            addResult('localStorage Support', 'pass', 'localStorage is available');
        } catch (e) {
            addResult('localStorage Support', 'fail', 'localStorage not available: ' + e.message);
        }

        // Test 2: insertBefore support
        try {
            const testDiv = document.createElement('div');
            const testChild = document.createElement('span');
            testDiv.appendChild(testChild);
            const newChild = document.createElement('span');
            testDiv.insertBefore(newChild, testChild);
            addResult('insertBefore Support', 'pass', 'insertBefore method works');
        } catch (e) {
            addResult('insertBefore Support', 'fail', 'insertBefore failed: ' + e.message);
        }

        // Test 3: window.innerWidth support
        try {
            const width = window.innerWidth;
            addResult('window.innerWidth Support', 'pass', `Current width: ${width}px`);
        } catch (e) {
            addResult('window.innerWidth Support', 'fail', 'innerWidth not available: ' + e.message);
        }

        // Test 4: Mobile detection
        const userAgent = navigator.userAgent;
        const isMobile = /iPhone|iPad|iPod/i.test(userAgent) ||
                         (navigator.maxTouchPoints && navigator.maxTouchPoints > 1 && window.innerWidth <= 768);
        addResult('Mobile Detection', 'info', `Is Mobile: ${isMobile}, UA: ${userAgent.substring(0, 50)}...`);

        // Test 5: CSS media query support
        const mediaQuery = window.matchMedia('(max-width: 768px)');
        addResult('Media Query Support', 'pass', `Matches mobile: ${mediaQuery.matches}`);

        // Test 6: Event listener support
        try {
            window.addEventListener('resize', () => {});
            addResult('Event Listener Support', 'pass', 'addEventListener works');
        } catch (e) {
            addResult('Event Listener Support', 'fail', 'addEventListener failed: ' + e.message);
        }

        // Test 7: querySelector support
        try {
            const test = document.querySelector('body');
            addResult('querySelector Support', 'pass', 'querySelector works');
        } catch (e) {
            addResult('querySelector Support', 'fail', 'querySelector failed: ' + e.message);
        }

        // Test 8: Flexbox order support
        try {
            const testDiv = document.createElement('div');
            testDiv.style.display = 'flex';
            testDiv.style.flexDirection = 'column';
            const child = document.createElement('div');
            child.style.order = '-1';
            testDiv.appendChild(child);
            addResult('Flexbox Order Support', 'pass', 'CSS order property works');
        } catch (e) {
            addResult('Flexbox Order Support', 'fail', 'Flexbox order failed: ' + e.message);
        }
    </script>
</body>
</html>